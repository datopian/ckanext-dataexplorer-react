(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,a,t){},316:function(e,a){},337:function(e,a,t){e.exports=t(832)},351:function(e){e.exports={"copy share link":"copy share link","copy embed text":"copy embed text","copy API URI":"copy API URI","No share link available":"No share link available","UPDATE CHART":"UPDATE CHART",Next:"Next",Previous:"Previous",Table:"Table",Map:"Map",Chart:"Chart","Total rows":"Total rows","Select chart type, group column (abscissa x-axis) and series (ordinate y-axis) on the right hand side panel.":"Select chart type, group column (abscissa x-axis) and series (ordinate y-axis) on the right hand side panel.","Select geo data column on the right hand side panel.":"Select geo data column on the right hand side panel."}},356:function(e){e.exports={"copy share link":"kopier delingslink","copy embed text":"kopier indlejret tekst","copy API URI":"kopier API URI","No share link available":"Der er ikke noget link tilg\xe6ngeligt","UPDATE CHART":"OPDATER DIAGRAM",Next:"N\xe6ste",Previous:"Tidligere",Table:"Bord",Map:"Kort",Chart:"Diagram","Total rows":"Samlede r\xe6kker"}},361:function(e){e.exports={"copy share link":"Copier lien de partage","copy embed text":"Int\xe9grer code d'int\xe9gration","copy API URI":"Copier API URI","No share link available":"Pas de lien de partage","UPDATE CHART":"Mettre \xe0 jour le graphique",Next:"Suivant",Previous:"Pr\xe9c\xe9dent",Table:"Tableau",Map:"Carte",Chart:"Graphique","Total rows":"Entr\xe9es totales","Select chart type, group column (abscissa x-axis) and series (ordinate y-axis) on the right hand side panel.":"S\xe9lectionner le type de graphe, la colonne de groupement (axe horizontal) et la s\xe9rie (axe vertical) dans le panneau de droite","Select geo data column on the right hand side panel.":"S\xe9lectionner la colonne de type g\xe9ographique dans le panneau de droite"}},366:function(e){e.exports={"copy share link":"copiar link para compartilhar","copy embed text":"copiar c\xf3digo para incorporar","copy API URI":"copiar URI da API","No share link available":"Nenhum link link para compartilhar est\xe1 dispon\xedvel","UPDATE CHART":"ATUALIZAR GR\xc1FICO",Next:"Pr\xf3ximo",Previous:"Anterior",Table:"Tabela",Map:"Mapa",Chart:"Gr\xe1fico","Total rows":"Total de linhas","Select chart type, group column (abscissa x-axis) and series (ordinate y-axis) on the right hand side panel.":"Selecione o tipo de gr\xe1fico, a coluna de agrupamento (eixo x ou abcissa) e s\xe9rie (eixo y ou ordenada) no painel lateral direito.","Select geo data column on the right hand side panel.":"Selecione a coluna de dados geogr\xe1ficos no painel lateral direito."}},440:function(e,a){},441:function(e,a){},516:function(e,a){},518:function(e,a){},550:function(e,a){},551:function(e,a){},735:function(e,a,t){var r={"./geojson.json":295,"./table-schema.json":736,"./topojson.json":296};function n(e){var a=i(e);return t(a)}function i(e){if(!t.o(r,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=i,e.exports=n,n.id=735},823:function(e,a){},824:function(e,a){},828:function(e,a){},829:function(e,a){},832:function(e,a,t){"use strict";t.r(a);var r=t(113),n=t(5),i=t.n(n),c=t(26),o=t(58),s=t(59),l=t(10),d=t(1),u=t.n(d),p=t(29),m=t.n(p),g=(t(119),t(112)),f=t(61),v=t(321),h=t(322),b=function(e){var a=k(e);return a.resources&&a.resources.forEach(function(e){delete e.data,delete e._values}),a.views&&a.views.forEach(function(e){e.resources&&e.resources.forEach(function(e){delete e.data,delete e._values})}),a},k=function(e){return JSON.parse(JSON.stringify(e))},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"DATA_VIEW_CHART_BUILDER_ACTION":var t=k(e);return t=t.map(function(e){return"simple"===e.datapackage.views[0].specType&&(e.datapackage.views[0]=a.payload),e}),Object.assign(k(e),t);case"DATA_VIEW_MAP_BUILDER_ACTION":var r=k(e);return r=r.map(function(e){return"tabularmap"===e.datapackage.views[0].specType&&(e.datapackage.views[0]=a.payload),e}),Object.assign(k(e),r);case"SELECT_TAB":case"FETCH_DATA_BEGIN":case"FETCH_DATA_SUCCESS":case"FETCH_DATA_FAILURE":return a.payload.widgets;default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"DATAPACKAGE_LOAD":return a.payload.datapackage;default:return e}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case"FILTER_UI_ACTION":default:return e}},E=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&arguments[1];var e=arguments.length>2?arguments[2]:void 0;try{var a=k(e);delete a.serializedState;var t=b(a.datapackage),r=a.widgets.map(function(e){return e.datapackage=b(e.datapackage),e.loading=!1,e});return JSON.stringify(Object.assign(a,{datapackage:t,widgets:r}))}catch(n){return console.warn(n),{}}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;return{widgets:w(e.widgets,a),datapackage:y(e.datapackage,a),datastoreFilters:x(e.datastoreFilters,a),serializedState:E(e.serializedState,a,e)}},T={datastoreFilters:{},datapackage:{},widgets:[],serializedState:{}};function S(e){return Object(f.createStore)(N,Object.assign({},T,e),Object(v.composeWithDevTools)(Object(f.applyMiddleware)(h.a)))}var A=t(323),O=t(329),C=t.n(O),_=t(330),I=function(e){var a,t,r=Object(l.useTranslation)().t,n=e.datapackage.views;return u.a.createElement(C.a,{loaded:!e.loading,style:{position:"relative"}},u.a.createElement("div",null,"simple"!==(t=n[0]).specType||t.spec&&Object.keys(t.spec).length>0?n.map(function(e){return u.a.createElement(_.DataView,{key:Math.random(),datapackage:{views:[e]}})}):(a=n[0].specType,u.a.createElement("div",{className:"dx-guiding-text"},"simple"===a?u.a.createElement("p",null,r("Select chart type, group column (abscissa x-axis) and series (ordinate y-axis) on the right hand side panel.")):"","tabularmap"===a?u.a.createElement("p",null,r("Select geo data column on the right hand side panel.")):""))))},j=["archiver","schema","shareLink","iframeText"],P=function(e){var a=Object(l.useTranslation)().t,t=function(e){if(e.length<=1500)return e;var a=JSON.parse(e);return a.datapackage.resources.forEach(function(e){for(var a in j)e[j[a]]&&delete e[j[a]]}),JSON.stringify(a)}(e.serializedState),r=new URL(window.location.href);r.searchParams.set("explorer",t);var n=r.href,i='<iframe src="'.concat(r.href,'" />'),c=n.length<2e3,o=function(e){var a=document.createElement("textarea");a.value=e,a.setAttribute("readonly",""),a.style={position:"absolute",left:"-9999px"},document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a)};return u.a.createElement("div",{className:"dx-share-container"},c?u.a.createElement("div",null,u.a.createElement("div",{className:"m-4 ml-0 dx-share-link"},u.a.createElement("input",{id:"share-link-"+Math.random().toString(36).slice(2,5),title:"Share link",className:"border-solid border-2 border-gray-600 w-1/2 px-2",value:n}),u.a.createElement("a",{href:"#/",id:"copy-share-link-"+Math.random().toString(36).slice(2,5),className:"m-4",onClick:function(){o(n)}},u.a.createElement("em",null,a("copy share link")))),u.a.createElement("div",{className:"m-4 ml-0 dx-embed-link"},u.a.createElement("input",{id:"embed-"+Math.random().toString(36).slice(2,5),title:"Embedded link",className:"border-solid border-2 border-gray-600 px-2 w-1/2",value:i}),u.a.createElement("a",{href:"#/",id:"copy-share-link-"+Math.random().toString(36).slice(2,5),className:"m-4",onClick:function(){o(i)}},u.a.createElement("em",null,a("copy embed text"))))):u.a.createElement("p",{className:"no-share-link-message"},a("No share link available")),e.apiUri&&u.a.createElement("div",{className:"m-4 ml-0 dx-apiuri-link"},u.a.createElement("input",{id:"apiUri-"+Math.random().toString(36).slice(2,5),title:"API URI link",className:"border-solid border-2 border-gray-600 px-2 w-1/2",value:e.apiUri}),u.a.createElement("a",{href:"#/",id:"copy-share-link-"+Math.random().toString(36).slice(2,5),className:"m-4",onClick:function(){o(e.apiUri)}},u.a.createElement("em",null,a("copy API URI")))))},D=t(331),U=t.n(D),R=function(e){var a=Object(l.useTranslation)().t;return u.a.createElement(U.a,{previousLabel:a("Previous"),nextLabel:a("Next"),breakLabel:"...",breakClassName:"break-me",pageCount:Math.ceil(e.datapackage.resources[0].totalrowcount/100),marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:function(a){var t=a.selected,r=Math.ceil(100*t),n=JSON.parse(JSON.stringify(e.datapackage.resources[0])),i=new URL(n.api);if(n.api.includes("datastore_search?"))i.searchParams.set("offset",r);else if(n.api.includes("datastore_search_sql?")){var c=i.searchParams.get("sql"),o=/OFFSET(%20|\s)\d+/;o.test(c)?i.searchParams.set("sql",c.replace(o,"OFFSET ".concat(r))):i.searchParams.set("sql",c+" OFFSET ".concat(r)),n.api=n.api.includes("offset")}n.api=i.href,e.updateAction(n)},containerClassName:"pagination",activeClassName:"active"})},J=t(327),L=t(328),M=t(115),F=t(182),B=t(249);function V(e){try{return JSON.parse(e)}catch(a){return e}}var H=function(e){var a,t,n;return i.a.async(function(c){for(;;)switch(c.prev=c.next){case 0:return a=V(e),t=["csv","tsv","dsv","xls","xlsx"],c.prev=2,c.next=5,i.a.awrap(F.Dataset.load(a));case 5:return n=c.sent,c.next=8,i.a.awrap(Promise.all(n.resources.map(function(e){var a,n,c,o,s,l,d,u;return i.a.async(function(p){for(;;)switch(p.prev=p.next){case 0:if("FileInline"!==e.displayName){p.next=4;break}return p.abrupt("return");case 4:if(!e.descriptor.api||!e.descriptor.api.includes("datastore_search")){p.next=25;break}return p.next=7,i.a.awrap(fetch(e.descriptor.api));case 7:if((a=p.sent).ok){p.next=11;break}return e.descriptor.unavailable=!0,p.abrupt("return");case 11:return p.next=13,i.a.awrap(a.json());case 13:if(n=p.sent,e.descriptor.data=n.result.records.map(function(e,a){e._id,e._full_text,e._count;return Object(r.a)(e,["_id","_full_text","_count"])}),0===n.result.records.length?e.descriptor.totalrowcount=0:e.descriptor.totalrowcount=n.result.total||n.result.records[0]._count,e.descriptor.schema){p.next=23;break}return c=Object(F.open)({data:e.descriptor.data.map(Object.values),format:"csv"}),o=Object.keys(e.descriptor.data[0]||{}),c.descriptor.data=[o].concat(c.descriptor.data),p.next=22,i.a.awrap(c.addSchema());case 22:e.descriptor.schema=c.descriptor.schema;case 23:p.next=68;break;case 25:if("FileRemote"!==e.displayName||!t.includes(e.descriptor.format)){p.next=44;break}return p.prev=26,p.next=29,i.a.awrap(e.rows({size:100,keyed:!0}));case 29:return s=p.sent,p.next=32,i.a.awrap(B(s));case 32:return(l=p.sent).length>0?e.descriptor.data=l:e.descriptor.unavailable=!0,p.next=36,i.a.awrap(e.addSchema());case 36:p.next=42;break;case 38:p.prev=38,p.t0=p.catch(26),console.warn(p.t0),e.descriptor.unavailable=!0;case 42:p.next=68;break;case 44:if(!e.descriptor.format.toLowerCase().includes("json")){p.next=63;break}return p.next=47,i.a.awrap(fetch(e.descriptor.path));case 47:if((d=p.sent).ok){p.next=51;break}return e.descriptor.unavailable=!0,p.abrupt("return");case 51:return p.next=53,i.a.awrap(d.json());case 53:if(u=p.sent,!["Feature","FeatureCollection","Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeometryCollection"].includes(u.type)){p.next=59;break}e.descriptor.data=u,p.next=61;break;case 59:return e.descriptor.unavailable=!0,p.abrupt("return");case 61:p.next=68;break;case 63:if("pdf"!==e.descriptor.format.toLowerCase()){p.next=67;break}return p.abrupt("return");case 67:e.descriptor.unavailable=!0;case 68:case"end":return p.stop()}},null,null,[[26,38]])})));case 8:return c.abrupt("return",n.descriptor);case 11:return c.prev=11,c.t0=c.catch(2),console.warn("Failed to load a Dataset from provided datapackage id\n"+c.t0),c.abrupt("return",a);case 15:case"end":return c.stop()}},null,null,[[2,11]])},q=t(111),z=function(e){return{type:"SELECT_TAB",payload:Object(c.a)({},e)}},G=function(e){return{type:"DATAPACKAGE_LOAD",payload:Object(c.a)({},e)}},W=function(e){return{type:"FETCH_DATA_BEGIN",payload:Object(c.a)({},e)}},K=function(e){return{type:"FETCH_DATA_SUCCESS",payload:Object(c.a)({},e)}},Q=Object(g.b)(function(e){return Object(c.a)({},e)},function(e){return{filterUIAction:function(a){return e(function(e){return function(a,t){var r,n,c,o,s,l;return i.a.async(function(d){for(;;)switch(d.prev=d.next){case 0:return r=JSON.parse(JSON.stringify(t().datapackage)),n=JSON.parse(JSON.stringify(e)),(c=Object.assign(r,{resources:[n]})).resources[0].datastore_active&&delete c.resources[0].data,a(G({datapackage:c})),o=JSON.parse(JSON.stringify(t().widgets)).map(function(e){return e.loading=!0,e}),a(W({widgets:o})),r=JSON.parse(JSON.stringify(t().datapackage)),d.next=10,i.a.awrap(H(r));case 10:s=d.sent,a(G({datapackage:s})),l=JSON.parse(JSON.stringify(t().widgets)).map(function(e){return e.datapackage.views=e.datapackage.views.map(function(e){return Object(q.compileView)(e,s)}),e.loading=!1,e}),a(K({widgets:l}));case 14:case"end":return d.stop()}})}}(a))},fetchDataAction:function(a){return e(function(e){return function(a){var t,r,n,c;return i.a.async(function(o){for(;;)switch(o.prev=o.next){case 0:return t=JSON.parse(JSON.stringify(e.widgets)).map(function(e){return e.loading=!0,e}),a(W({widgets:t})),r=JSON.parse(JSON.stringify(e.datapackage)),o.next=5,i.a.awrap(H(r));case 5:n=o.sent,a(G({datapackage:n})),c=JSON.parse(JSON.stringify(e.widgets)).map(function(e){return e.datapackage.views=e.datapackage.views.map(function(e){return Object(q.compileView)(e,n)}),e}),a(K({widgets:c}));case 9:case"end":return o.stop()}})}}(a))},dataViewBuilderAction:function(a){return e(function(e){return function(a){var t;"simple"===e.specType?t="DATA_VIEW_CHART_BUILDER_ACTION":"tabularmap"===e.specType&&(t="DATA_VIEW_MAP_BUILDER_ACTION"),a({type:t,payload:e})}}(a))},selectTabAction:function(a){return e(function(e){return function(a,t){var r=JSON.parse(JSON.stringify(t().widgets));r.forEach(function(a,t){r[t].active=!1,(a.name===e||e.includes("-")&&e.split("-")[0]===a.name)&&(r[t].active=!0)}),a(z({widgets:r}))}}(a))}}})(function(e){Object(d.useEffect)(function(){var a={datapackage:e.datapackage,widgets:e.widgets};e.fetchDataAction(a)},[]);var a,t=e.widgets.find(function(e){return e.active}),r=Object(l.useTranslation)().t,n=["web","document"],i=e.widgets.find(function(e){return e.datapackage.views.find(function(e){return!n.includes(e.specType)})}),c=e.datapackage.resources[0].datastore_active&&e.datapackage.resources[0].totalrowcount?e.datapackage.resources[0].totalrowcount.toLocaleString():"",o="-"+Math.random().toString(36).slice(2,5),s=t?t.name:e.widgets[0].name;a=s.includes("-")?s:s+o;var p=/\W+/gi;a=a.replace(p,"-");var m,g=e.widgets.map(function(e,a){return u.a.createElement(M.TabLink,{to:(e.name+o).replace(p,"-"),className:"mr-4 tab-".concat(e.name.toLowerCase()),key:"tabLink-".concat(a)},r(e.name))}),f=e.widgets.map(function(a,t){return u.a.createElement(M.TabContent,{for:(a.name+o).replace(p,"-"),className:"mr-4 tabpanel-".concat(a.name.toLowerCase()),key:"tabContent-".concat(t)},["table","web"].includes(a.datapackage.views[0].specType)||["dataexplorer_map_view","dataexplorer_chart_view"].includes(a.datapackage.views[0].view_type)?u.a.createElement("div",{className:"container flex py-6"},u.a.createElement("div",{className:"w-full py-3"},u.a.createElement(I,a))):u.a.createElement("div",{className:"container flex py-6"},u.a.createElement("div",{className:"w-3/4 py-3 mr-4"},u.a.createElement(I,a)),u.a.createElement("div",{className:"w-1/4"},u.a.createElement("div",{className:"w-full"},u.a.createElement("div",{className:"p-4 mr-4"},"simple"===a.datapackage.views[0].specType?u.a.createElement(J.ChartBuilder,{view:a.datapackage.views[0],dataViewBuilderAction:e.dataViewBuilderAction}):"","tabularmap"===a.datapackage.views[0].specType?u.a.createElement(L.MapBuilder,{view:a.datapackage.views[0],dataViewBuilderAction:e.dataViewBuilderAction}):"")))))});return u.a.createElement("div",{className:"data-explorer"},c&&i&&u.a.createElement("div",{className:"total-rows"},u.a.createElement("span",{className:"total-rows-label"},r("Total rows")),": ",u.a.createElement("span",{className:"total-rows-value"},c)),u.a.createElement("div",{className:"datastore-query-builder"},function(e){var a=e.widgets.find(function(e){return e.active}),t=!1;try{t=["web","document"].includes(a.datapackage.views[0].specType)}catch(r){}return!t&&e.datapackage.resources[0].datastore_active}(e)?u.a.createElement(A.QueryBuilder,{resource:(m=e.datapackage,m?m.resources[0]:{}),filterBuilderAction:e.filterUIAction}):""),u.a.createElement(M.Tabs,{renderActiveTabContentOnly:!0,handleSelect:function(a){e.selectTabAction(a)},className:"data-explorer-content",selectedTab:a},g,f),e.datapackage.resources[0].datastore_active&&i?u.a.createElement(R,{datapackage:e.datapackage,updateAction:e.filterUIAction}):u.a.createElement("div",{className:"no-pagination not-datastore-resource"}),i?u.a.createElement(P,{serializedState:e.serializedState,apiUri:e.datapackage.resources[0].api}):u.a.createElement("div",{className:"no-share-feature"}))}),Z=function(e){var a,t,r=Object(l.useTranslation)().t;if("string"===typeof e.datapackage)try{a=JSON.parse(e.datapackage)}catch(i){a={},console.warn("Invalid datapackage",i)}else"object"===typeof e.datapackage&&(a=e.datapackage);try{t=JSON.parse(JSON.stringify(a.views)),delete a.views}catch(c){console.log("No views set on datapackage")}var n=e.widgets?e.widgets:function(e){var a={table:r("Table"),tabularmap:r("Map"),map:r("Map"),simple:r("Chart")};return e.map(function(e,t){return{active:0===t,name:a[e.specType],datapackage:{views:[e]}}})}(t);return u.a.createElement(g.a,{store:S({widgets:n,datapackage:a})},u.a.createElement(Q,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=document.getElementsByClassName("data-explorer");i.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(o.default.use(s.default).use(l.initReactI18next).init({detection:{order:["querystring","cookie","localStorage","navigator","htmlTag","path","subdomain"],lookupQuerystring:"lng",lookupCookie:"defaultLocale",lookupLocalStorage:"defaultLocale",lookupFromPathIndex:0,lookupFromSubdomainIndex:0},resources:{en:{translation:Object(c.a)({},t(351),{},t(352),{},t(353),{},t(354),{},t(355))},da:{translation:Object(c.a)({},t(356),{},t(357),{},t(358),{},t(359),{},t(360))},fr:{translation:Object(c.a)({},t(361),{},t(362),{},t(363),{},t(364),{},t(365))},pt_BR:{translation:Object(c.a)({},t(366),{},t(367),{},t(368),{},t(369),{},t(370))}},react:{useSuspense:!1},initImmediate:!1,debug:!1,nsSeparator:!1,keySeparator:!1,fallbackLng:!1,interpolation:{escapeValue:!1}}));case 2:case"end":return e.stop()}}).then(function(){var e=!0,a=!1,t=void 0;try{for(var n,i=$[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var c=n.value;try{var o=JSON.parse(c.getAttribute("data-datapackage")),s=o.datapackage,l=Object(r.a)(o,["datapackage"]);m.a.render(u.a.createElement(Z,Object.assign({datapackage:s},l)),document.getElementById(c.id))}catch(d){console.warn("Failed to render data-explorer",d)}}}catch(p){a=!0,t=p}finally{try{e||null==i.return||i.return()}finally{if(a)throw t}}}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[337,1,2]]]);